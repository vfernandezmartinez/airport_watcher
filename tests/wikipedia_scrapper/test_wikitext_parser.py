import unittest

from wikipedia_scrapper import wikitext_parser, ScrapError


class WikitextParserTest(unittest.TestCase):
    def setUp(self):
        self.maxDiff = None

    def test_airport_dest_list_template(self):
        expected_result = {
            'Aegean Airlines': ['Athens'],
            'Aer Lingus': ['Cork', 'Dublin'],
            'Wizz Air': ['Bucharest', 'Budapest', 'Kraków', 'Sofia', 'Vilnius', 'Vienna', 'Warsaw–Chopin'],
        }
        wikitext = "=== Passenger ===\n{{Airport-dest-list\n<!-- -->\n| [[Aegean Airlines]] | '''Seasonal:''' [[Athens International Airport|Athens]]<ref>{{cite web |url=https://en.aegeanair.com/plan/book-a-flight/ |title=Book a flight |publisher=Aegean Airlines |accessdate=30 October 2015}}</ref>\n<!--  -->\n| [[Aer Lingus]] | '''Seasonal:''' [[Cork Airport|Cork]] (resumes 17 April 2019),<ref>{{cite web |url=https://www.corkairport.com/news/detail/2018/10/26/cork-airport-welcomes-new-aer-lingus-routes-to-nice-and-dubrovnik |title=Cork Airport Welcomes New Aer Lingus Routes To Nice And Dubrovnik |publisher=Cork Airport |date=26 October 2018 |accessdate=30 October 2018}}</ref> [[Dublin Airport|Dublin]]\n<!-- -->\n| [[Wizz Air]] | [[Henri Coand\u0103 International Airport|Bucharest]], [[Budapest Ferenc Liszt International Airport|Budapest]],<ref>{{cite web |url=https://wizzair.com/en-GB/about_us/news/wizzen341 |title=Wizz Air thrives in Hungary |website=wizzair.com |dead-url=yes |archive-url=https://web.archive.org/web/20150924105018/https://wizzair.com/en-GB/about_us/news/wizzen341 |archive-date=24 September 2015}}</ref> [[Krak\u00f3w John Paul II International Airport|Krak\u00f3w]] (begins 1 May 2019),<ref>{{cite web |url=https://businessinsider.com.pl/firmy/strategie/nowe-polaczenia-wizz-air-z-lotniska-w-krakowie/d4hpxvg|title=Wizz Air will fly from Krakow. Cheap carrier will open 12 routes from the capital of Lesser Poland|date=21 November 2018|website=Businessinsider.com.pl}}</ref> [[Sofia Airport|Sofia]], [[Vilnius airport|Vilnius]], [[Vienna International Airport|Vienna]],<ref>{{cite web|title=Wien: Wizzair k\u00fcndigt neun weitere Strecken an |url=http://www.austrianaviation.net/detail/wien-wizzair-kuendigt-neun-weitere-strecken-an/|website=Austrianaviation.net|accessdate=2 March 2018}}</ref> [[Warsaw Chopin Airport|Warsaw\u2013Chopin]]<ref>{{cite web |url=https://wizzair.com/|title=Welcome to the world of opportunity! |website=wizzair.com|accessdate=23 January 2019}}</ref>\n<!-- -->\n}}\n\n{{notelist}}"
        result = wikitext_parser.get_airlines_destinations_from_wikitext(wikitext)
        self.assertEqual(result, expected_result)

    def test_airport_destination_list_template(self):
        expected_result = {
            'Aegean Airlines': ['Athens'],
            'Aer Lingus': ['Belfast–City', 'Cork', 'Dublin', 'Shannon'],
            'Aeroflot': ['Moscow–Sheremetyevo'],
            'Aeroméxico': ['Mexico City'],
            'Air Algérie': ['Algiers'],
            'Air Astana': ['Nur-Sultan'],
            'Air Canada': ['Calgary', 'Halifax', 'Montréal–Trudeau', 'Ottawa', "St. John's", 'Toronto–Pearson',
                           'Vancouver'],
            'Air China': ['Beijing–Capital', 'Chengdu'],
            'Air France': ['Paris–Charles de Gaulle'],
            'Air India': ['Ahmedabad', 'Bengaluru', 'Delhi', 'Mumbai'],
            'Air Malta': ['Malta'],
            'Air Mauritius': ['Mauritius'],
            'Air New Zealand': ['Auckland', 'Los Angeles'],
            'Air Serbia': ['Belgrade'],
            'Alitalia': ['Milan—Linate', 'Rome–Fiumicino'],
            'All Nippon Airways': ['Tokyo–Haneda'],
            'American Airlines': ['Charlotte', "Chicago–O'Hare", 'Dallas/Fort Worth', 'Los Angeles', 'Miami',
                                  'New York–JFK', 'Philadelphia', 'Phoenix–Sky Harbor', 'Raleigh/Durham'],
            'Asiana Airlines': ['Seoul–Incheon'],
            'Austrian Airlines': ['Vienna'],
            'Avianca': ['Bogotá'],
            'Azerbaijan Airlines': ['Baku'],
            'Beijing Capital Airlines': ['Qingdao'],
            'Biman Bangladesh Airlines': ['Dhaka', 'Sylhet'],
            'British Airways': ['Aberdeen', 'Abu Dhabi', 'Abuja', 'Accra', 'Amman–Queen Alia', 'Amsterdam', 'Athens',
                                'Atlanta', 'Austin', 'Bahrain', 'Baltimore', 'Bengaluru', 'Bangkok–Suvarnabhumi',
                                'Barcelona', 'Basel/Mulhouse/Freiburg', 'Beijing–Capital', 'Beirut', 'Belfast–City',
                                'Berlin–Tegel', 'Billund', 'Bologna', 'Boston', 'Brussels', 'Bucharest–Otopeni',
                                'Budapest', 'Buenos Aires–Ezeiza', 'Cairo', 'Cape Town', 'Chennai', "Chicago–O'Hare",
                                'Copenhagen', 'Dallas/Fort Worth', 'Dammam', 'Delhi', 'Denver', 'Doha',
                                'Dubai–International', 'Dublin', 'Durban', 'Düsseldorf', 'Edinburgh', 'Frankfurt',
                                'Geneva', 'Gibraltar', 'Glasgow', 'Gothenburg', 'Gran Canaria', 'Grand Cayman',
                                'Hamburg', 'Hanover', 'Helsinki', 'Hong Kong', 'Houston–Intercontinental', 'Hyderabad',
                                'Innsbruck', 'Inverness', 'Islamabad', 'Istanbul', 'Jeddah', 'Johannesburg–OR Tambo',
                                'Kyiv–Boryspil', 'Kraków', 'Kuala Lumpur–International', 'Kuwait City', 'Lagos',
                                'Larnaca', 'Las Vegas', 'Leeds/Bradford', 'Lisbon', 'Los Angeles', 'Luxembourg',
                                'Lyon', 'Madrid', 'Mahé Island', 'Málaga', 'Manchester', 'Marseille', 'Mexico City',
                                'Miami', 'Milan–Linate', 'Milan–Malpensa', 'Montréal–Trudeau', 'Moscow–Domodedovo',
                                'Moscow–Sheremetyevo', 'Mumbai', 'Munich', 'Muscat', 'Nairobi–Jomo Kenyatta',
                                'Nashville', 'Nassau', 'New Orleans', 'New York–JFK', 'Newark', 'Newcastle upon Tyne',
                                'Nice', 'Osaka–Kansai', 'Oslo–Gardermoen', 'Paris–Charles de Gaulle', 'Philadelphia',
                                'Phoenix–Sky Harbor', 'Pisa', 'Pittsburgh', 'Prague', 'Reykjavík–Keflavík',
                                'Rio de Janeiro–Galeão', 'Riyadh', 'Rome–Fiumicino', 'Saint Petersburg', 'San Diego',
                                'San Francisco', 'San Jose', 'Santiago de Chile', 'São Paulo–Guarulhos',
                                'Seattle/Tacoma', 'Seoul–Incheon', 'Shanghai–Pudong', 'Singapore', 'Sofia',
                                'Stockholm–Arlanda', 'Stuttgart', 'Sydney', 'Tel Aviv–Ben Gurion', 'Tenerife-South',
                                'Tokyo–Haneda', 'Tokyo–Narita', 'Toronto–Pearson', 'Toulouse', 'Valencia', 'Vancouver',
                                'Venice', 'Vienna', 'Warsaw–Chopin', 'Washington–Dulles', 'Zagreb', 'Zürich', 'Bastia',
                                'Brindisi', 'Calgary', 'Chania', 'Charleston', 'Corfu', 'Faro', 'Figari', 'Grenoble',
                                'Ibiza', 'Kalamata', 'Kefalonia', 'Ljubljana', 'Marrakesh', 'Montpellier', 'Muscat',
                                'Mykonos', 'Nantes', 'Olbia', 'Palermo', 'Palma de Mallorca', 'Preveza/Lefkada',
                                'Pula', 'Salzburg', 'Santorini', 'Split', 'Zakynthos'],
            'Brussels Airlines': ['Brussels'],
            'Bulgaria Air': ['Sofia'],
            'Cathay Pacific': ['Hong Kong'],
            'China Eastern Airlines': ['Shanghai–Pudong'],
            'China Southern Airlines': ['Guangzhou', 'Sanya', 'Wuhan', 'Zhengzhou'],
            'Croatia Airlines': ['Zagreb', 'Split'],
            'Delta Air Lines': ['Atlanta', 'Boston', 'Detroit', 'Minneapolis/St. Paul', 'New York–JFK', 'Portland',
                                'Salt Lake City'],
            'EgyptAir': ['Cairo', 'Luxor'],
            'El Al': ['Tel Aviv–Ben Gurion'],
            'Emirates': ['Dubai–International'],
            'Ethiopian Airlines': ['Addis Ababa'],
            'Etihad Airways': ['Abu Dhabi'],
            'Eurowings': ['Berlin-Tegel', 'Cologne/Bonn', 'Düsseldorf', 'Hamburg', 'Stuttgart'],
            'EVA Air': ['Bangkok–Suvarnabhumi', 'Taipei–Taoyuan'],
            'Finnair': ['Helsinki'],
            'Flybe': ['Aberdeen', 'Edinburgh', 'Guernsey', 'Isle of Man', 'Newquay'],
            'Garuda Indonesia': ['Denpasar', 'Jakarta-Soekarno-Hatta'],
            'Gulf Air': ['Bahrain'],
            'Hainan Airlines': ['Changsha'],
            'Iberia': ['Madrid'],
            'Icelandair': ['Reykjavík–Keflavík'],
            'Iran Air': ['Tehran–Imam Khomeini'],
            'Japan Airlines': ['Tokyo–Haneda'],
            'Kenya Airways': ['Nairobi–Kenyatta'],
            'KLM': ['Amsterdam'],
            'Korean Air': ['Seoul–Incheon'],
            'Kuwait Airways': ['Kuwait City'],
            'LATAM Brasil': ['São Paulo–Guarulhos'],
            'LOT Polish Airlines': ['Warsaw–Chopin'],
            'Lufthansa': ['Frankfurt', 'Munich'],
            'Malaysia Airlines': ['Kuala Lumpur–International'],
            'Middle East Airlines': ['Beirut'],
            'Oman Air': ['Muscat'],
            'Pakistan International Airlines': ['Islamabad', 'Karachi', 'Lahore'],
            'Philippine Airlines': ['Manila'],
            'Qantas': ['Melbourne', 'Perth', 'Singapore', 'Sydney'],
            'Qatar Airways': ['Doha'],
            'Royal Air Maroc': ['Casablanca', 'Rabat'],
            'Royal Brunei Airlines': ['Bandar Seri Begawan'],
            'Royal Jordanian': ['Amman–Queen Alia'],
            'Saudia': ['Jeddah', 'Riyadh', 'Medina'],
            'Scandinavian Airlines': ['Copenhagen', 'Oslo–Gardermoen', 'Stavanger', 'Stockholm–Arlanda'],
            'Shenzhen Airlines': ['Shenzhen'],
            'Singapore Airlines': ['Singapore'],
            'South African Airways': ['Johannesburg–OR Tambo'],
            'SriLankan Airlines': ['Colombo'],
            'Swiss International Air Lines': ['Geneva', 'Zürich', 'Sion'],
            'TAP Air Portugal': ['Lisbon'],
            'TAROM': ['Bucharest–Otopeni'],
            'Thai Airways': ['Bangkok–Suvarnabhumi'],
            'Tianjin Airlines': ['Chongqing', 'Tianjin', "Xi'an"],
            'Tunisair': ['Tunis'],
            'Turkish Airlines': ['Istanbul'],
            'Turkmenistan Airlines': ['Ashgabat'],
            'United Airlines': ["Chicago–O'Hare", 'Houston–Intercontinental', 'Los Angeles', 'Newark', 'San Francisco',
                                'Washington–Dulles', 'Denver'],
            'Uzbekistan Airways': ['Tashkent'],
            'Vietnam Airlines': ['Hanoi', 'Ho Chi Minh City'],
            'Virgin Atlantic': ['Atlanta', 'Boston', 'Delhi', 'Hong Kong', 'Johannesburg–OR Tambo', 'Lagos',
                                'Las Vegas', 'Los Angeles', 'Miami', 'New York–JFK', 'Newark', 'San Francisco',
                                'Seattle/Tacoma', 'Shanghai–Pudong', 'Tel Aviv–Ben Gurion', 'Washington–Dulles',
                                'Barbados'],
            'Vueling': ['A Coruña'],
        }
        wikitext = "===Passenger===\nThe following airlines operate regular scheduled passenger flights at London Heathrow Airport:<ref>{{cite web|url=https://www.heathrow.com/plan-and-book-your-trip/destinations-and-airlines|title=Heathrow destinations list|accessdate=6 June 2018}}</ref>\n\n<!-- DO NOT EDIT THIS SECTION WITHOUT A REFERENCE. THIS IS A FACTUAL PAGE, AND THUS DOES NOT DEAL WITH THE REALM OF FICTION. ANY UNREFERENCED CHANGES MADE WILL BE REVERSED. PLEASE HAVE RESPECT FOR THE FACTUAL ACCURACY OF THIS PAGE. -->\n{{Airport destination list\n<!-- -->\n| [[Aegean Airlines]] | [[Athens International Airport|Athens]]\n<!-- -->\n| [[Aer Lingus]]<ref>{{cite web |title=Timetables |url=https://www.aerlingus.com/html/flights-time-table.html |accessdate=16 April 2019}}</ref> | [[George Best Belfast City Airport|Belfast\u2013City]], [[Cork Airport|Cork]], [[Dublin Airport|Dublin]], [[Shannon Airport|Shannon]]\n<!-- -->\n| [[Aeroflot]] | [[Sheremetyevo International Airport|Moscow\u2013Sheremetyevo]]\n<!-- -->\n| [[Aerom\u00e9xico]] | [[Mexico City International Airport|Mexico City]]\n<!-- -->\n| [[Air Alg\u00e9rie]] | [[Houari Boumediene Airport|Algiers]]\n<!-- -->\n| [[Air Astana]] | [[Nursultan Nazarbayev International Airport|Nur-Sultan]]\n<!-- -->\n| [[Air Canada]]<ref>{{cite web |title=Flight Schedules - Air Canada |url=https://www.aircanada.com/ca/en/aco/home/book/routes-and-partners/flight-schedules.html |accessdate=13 October 2018}}</ref> | [[Calgary International Airport|Calgary]],  [[Halifax Stanfield International Airport|Halifax]] (suspended)<ref>https://globalnews.ca/news/5071188/air-canada-suspend-boeing-737-max-planes-until-july-1/</ref>, [[Montr\u00e9al\u2013Pierre Elliott Trudeau International Airport|Montr\u00e9al\u2013Trudeau]], [[Ottawa Macdonald\u2013Cartier International Airport|Ottawa]], [[St. John's International Airport|St. John's]] (suspended)<ref>https://globalnews.ca/news/5071188/air-canada-suspend-boeing-737-max-planes-until-july-1/</ref>, [[Toronto Pearson International Airport|Toronto\u2013Pearson]], [[Vancouver International Airport|Vancouver]]\n<!-- -->\n| [[Air China]] | [[Beijing Capital International Airport|Beijing\u2013Capital]], [[Chengdu Shuangliu International Airport|Chengdu]]\n<!-- -->\n| [[Air France]]<ref>{{cite web |title=Air France flight schedule |url=https://www.airfrance.us/US/en/local/resainfovol/horaires/horaires.do |accessdate=13 October 2018}}</ref> | [[Charles de Gaulle Airport|Paris\u2013Charles de Gaulle]]\n<!-- -->\n| [[Air India]] | [[Sardar Vallabhbhai Patel International Airport|Ahmedabad]], [[Kempegowda International Airport|Bengaluru]], [[Indira Gandhi International Airport|Delhi]], [[Chhatrapati Shivaji International Airport|Mumbai]]\n<!-- -->\n| [[Air Malta]] | [[Malta International Airport|Malta]]\n<!-- -->\n| [[Air Mauritius]] | [[Sir Seewoosagur Ramgoolam International Airport|Mauritius]]\n<!-- -->\n| [[Air New Zealand]] | [[Auckland Airport|Auckland]], [[Los Angeles International Airport|Los Angeles]]\n<!-- -->\n| [[Air Serbia]] | [[Belgrade Nikola Tesla Airport|Belgrade]]\n<!-- -->\n| [[Alitalia]] | [[Linate Airport|Milan\u2014Linate]], [[Leonardo da Vinci\u2013Fiumicino Airport|Rome\u2013Fiumicino]]\n<!-- -->\n| [[All Nippon Airways]]<ref>{{cite web |title=Timetables [International Routes] |url=https://www.ana.co.jp/en/us/book-plan/airinfo/timetable/international/ |accessdate=16 April 2019}}</ref> | [[Haneda Airport|Tokyo\u2013Haneda]]\n<!-- -->\n| [[American Airlines]]<ref>{{cite web |title=Flight schedules and notifications |url=https://www.aa.com/travelInformation/flights/schedule |accessdate=13 October 2018}}</ref> | [[Charlotte Douglas International Airport|Charlotte]], [[O'Hare International Airport|Chicago\u2013O'Hare]], [[Dallas/Fort Worth International Airport|Dallas/Fort Worth]], [[Los Angeles International Airport|Los Angeles]], [[Miami International Airport|Miami]], [[John F. Kennedy International Airport|New York\u2013JFK]], [[Philadelphia International Airport|Philadelphia]], [[Phoenix Sky Harbor International Airport|Phoenix\u2013Sky Harbor]], [[Raleigh Durham International Airport|Raleigh/Durham]] \n<!-- -->\n| [[Asiana Airlines]] | [[Incheon International Airport|Seoul\u2013Incheon]]\n<!-- -->\n| [[Austrian Airlines]] | [[Vienna International Airport|Vienna]]\n<!-- -->\n| [[Avianca]] | [[El Dorado International Airport|Bogot\u00e1]]\n<!-- -->\n| [[Azerbaijan Airlines]] | [[Heydar Aliyev International Airport|Baku]]\n<!-- -->\n| [[Beijing Capital Airlines]] | [[Qingdao Liuting International Airport|Qingdao]]\n<!-- -->\n| [[Biman Bangladesh Airlines]] | [[Shahjalal International Airport|Dhaka]], [[Osmani International Airport|Sylhet]]\n<!-- -->\n| [[British Airways]]<ref>{{cite web |title=British Airways - Timetables |url=https://www.britishairways.com/travel/schedules/public/en_us |accessdate=21 August 2018}}</ref> | [[Aberdeen Airport|Aberdeen]], [[Abu Dhabi International Airport|Abu Dhabi]], [[Nnamdi Azikiwe International Airport|Abuja]], [[Kotoka International Airport|Accra]], [[Queen Alia International Airport|Amman\u2013Queen Alia]], [[Amsterdam Airport Schiphol|Amsterdam]], [[Athens International Airport|Athens]], [[Hartsfield\u2013Jackson Atlanta International Airport |Atlanta]], [[Austin\u2013Bergstrom International Airport|Austin]], [[Bahrain International Airport|Bahrain]], [[Baltimore\u2013Washington International Thurgood Marshall Airport|Baltimore]], [[Kempegowda International Airport|Bengaluru]], [[Suvarnabhumi Airport|Bangkok\u2013Suvarnabhumi]], [[Barcelona\u2013El Prat Airport|Barcelona]], [[EuroAirport Basel\u2013Mulhouse\u2013Freiburg|Basel/Mulhouse/Freiburg]], [[Beijing Capital International Airport|Beijing\u2013Capital]], [[Beirut\u2013Rafic Hariri International Airport|Beirut]], [[George Best Belfast City Airport|Belfast\u2013City]], [[Berlin Tegel Airport|Berlin\u2013Tegel]], [[Billund Airport|Billund]], [[Bologna Guglielmo Marconi Airport|Bologna]], [[Logan International Airport|Boston]], [[Brussels Airport|Brussels]], [[Henri Coand\u0103 International Airport|Bucharest\u2013Otopeni]], [[Budapest Ferenc Liszt International Airport|Budapest]], [[Ministro Pistarini International Airport|Buenos Aires\u2013Ezeiza]], [[Cairo International Airport|Cairo]], [[Cape Town International Airport|Cape Town]], [[Chennai International Airport|Chennai]], [[O'Hare International Airport|Chicago\u2013O'Hare]], [[Copenhagen Airport|Copenhagen]], [[Dallas/Fort Worth International Airport|Dallas/Fort Worth]], [[King Fahd International Airport|Dammam]] (resumes 1 December 2019),<ref>http://mediacentre.britishairways.com/pressrelease/details/86/2019-319/10849?ref=Home</ref> [[Indira Gandhi International Airport|Delhi]], [[Denver International Airport|Denver]], [[Hamad International Airport|Doha]], [[Dubai International Airport|Dubai\u2013International]], [[Dublin Airport|Dublin]], [[King Shaka International Airport|Durban]], [[D\u00fcsseldorf Airport|D\u00fcsseldorf]], [[Edinburgh Airport|Edinburgh]], [[Frankfurt Airport|Frankfurt]], [[Geneva International Airport|Geneva]], [[Gibraltar International Airport|Gibraltar]], [[Glasgow Airport|Glasgow]], [[G\u00f6teborg Landvetter Airport|Gothenburg]], [[Gran Canaria Airport|Gran Canaria]], [[Owen Roberts International Airport|Grand Cayman]], [[Hamburg Airport|Hamburg]], [[Hannover Airport|Hanover]], [[Helsinki Airport |Helsinki]], [[Hong Kong International Airport|Hong Kong]], [[George Bush Intercontinental Airport|Houston\u2013Intercontinental]], [[Rajiv Gandhi International Airport|Hyderabad]], [[Innsbruck Airport|Innsbruck]], [[Inverness Airport|Inverness]], [[Islamabad International Airport|Islamabad]] (resumes 2 June 2019),<ref>{{cite web|url=http://mediacentre.britishairways.com/pressrelease/details/86/2018-247/10422|title=BRITISH AIRWAYS TAKES OFF TO ISLAMABAD, PAKISTAN|first=British|last=Airways|website=mediacentre.britishairways.com |accessdate= 23 January 2019}}</ref> [[Istanbul Airport|Istanbul]], [[King Abdulaziz International Airport|Jeddah]], [[O. R. Tambo International Airport|Johannesburg\u2013OR Tambo]], [[Boryspil International Airport|Kyiv\u2013Boryspil]], [[John Paul II International Airport Krak\u00f3w\u2013Balice|Krak\u00f3w]], [[Kuala Lumpur International Airport|Kuala Lumpur\u2013International]], [[Kuwait International Airport|Kuwait City]], [[Murtala Muhammed International Airport|Lagos]], [[Larnaca International Airport|Larnaca]], [[McCarran International Airport|Las Vegas]], [[Leeds Bradford Airport|Leeds/Bradford]], [[Lisbon Portela Airport|Lisbon]], [[Los Angeles International Airport|Los Angeles]], [[Luxembourg Findel Airport|Luxembourg]], [[Lyon\u2013Saint Exup\u00e9ry Airport|Lyon]], [[Adolfo Su\u00e1rez Madrid\u2013Barajas Airport|Madrid]], [[Seychelles International Airport|Mah\u00e9 Island]], [[M\u00e1laga Airport|M\u00e1laga]], [[Manchester Airport|Manchester]], [[Marseille Provence Airport|Marseille]], [[Mexico City International Airport|Mexico City]], [[Miami International Airport|Miami]], [[Linate Airport|Milan\u2013Linate]], [[Milan Malpensa Airport|Milan\u2013Malpensa]], [[Montr\u00e9al\u2013Pierre Elliott Trudeau International Airport|Montr\u00e9al\u2013Trudeau]], [[Domodedovo International Airport|Moscow\u2013Domodedovo]], [[Sheremetyevo International Airport|Moscow\u2013Sheremetyevo]], [[Chhatrapati Shivaji International Airport|Mumbai]], [[Munich Airport|Munich]], [[Muscat International Airport|Muscat]], [[Jomo Kenyatta International Airport|Nairobi\u2013Jomo Kenyatta]], [[Nashville International Airport|Nashville]], [[Lynden Pindling International Airport|Nassau]], [[Louis Armstrong New Orleans International Airport|New Orleans]], [[John F. Kennedy International Airport|New York\u2013JFK]], [[Newark Liberty International Airport|Newark]], [[Newcastle Airport|Newcastle upon Tyne]], [[Nice C\u00f4te d'Azur Airport|Nice]], [[Kansai International Airport|Osaka\u2013Kansai]], [[Oslo Airport, Gardermoen |Oslo\u2013Gardermoen]], [[Charles de Gaulle Airport|Paris\u2013Charles de Gaulle]], [[Philadelphia International Airport|Philadelphia]], [[Phoenix Sky Harbor International Airport|Phoenix\u2013Sky Harbor]], [[Pisa International Airport|Pisa]], [[Pittsburgh International Airport|Pittsburgh]], [[Prague V\u00e1clav Havel Airport|Prague]], [[Keflav\u00edk International Airport|Reykjav\u00edk\u2013Keflav\u00edk]], [[Rio de Janeiro\u2013Gale\u00e3o International Airport|Rio de Janeiro\u2013Gale\u00e3o]], [[King Khalid International Airport|Riyadh]], [[Leonardo da Vinci\u2013Fiumicino Airport|Rome\u2013Fiumicino]], [[Pulkovo Airport|Saint Petersburg]], [[San Diego International Airport|San Diego]], [[San Francisco International Airport|San Francisco]], [[San Jose International Airport|San Jose (CA)]], [[Arturo Merino Ben\u00edtez International Airport|Santiago de Chile]], [[S\u00e3o Paulo\u2013Guarulhos International Airport|S\u00e3o Paulo\u2013Guarulhos]], [[Seattle\u2013Tacoma International Airport|Seattle/Tacoma]], [[Incheon International Airport|Seoul\u2013Incheon]], [[Shanghai Pudong International Airport|Shanghai\u2013Pudong]], [[Singapore Changi Airport|Singapore]], [[Sofia Airport|Sofia]], [[Stockholm Arlanda Airport|Stockholm\u2013Arlanda]], [[Stuttgart Airport|Stuttgart]], [[Sydney Airport|Sydney]], [[Ben Gurion Airport|Tel Aviv\u2013Ben Gurion]], [[Tenerife\u2013South Airport|Tenerife-South]], [[Haneda Airport|Tokyo\u2013Haneda]], [[Narita International Airport|Tokyo\u2013Narita]], [[Toronto Pearson International Airport|Toronto\u2013Pearson]], [[Toulouse\u2013Blagnac Airport|Toulouse]], [[Valencia Airport|Valencia]], [[Vancouver International Airport|Vancouver]], [[Venice Marco Polo Airport|Venice]], [[Vienna International Airport|Vienna]], [[Warsaw Chopin Airport|Warsaw\u2013Chopin]], [[Washington Dulles International Airport|Washington\u2013Dulles]], [[Zagreb Airport|Zagreb]], [[Zurich Airport|Z\u00fcrich]]<br>'''Seasonal:''' [[Bastia Airport |Bastia]] (begins 25 May 2019),<ref name=\"britishairways1\">{{cite web|url=http://mediacentre.britishairways.com/pressrelease/details/86/2018-247/10199?ref=Home |title=British Airways - SUMMER SCHEDULE SHAPES UP |publisher=Mediacentre.britishairways.com |date= |accessdate=16 October 2018}}</ref> [[Brindisi \u2013 Salento Airport|Brindisi]], [[Calgary International Airport|Calgary]], [[Chania International Airport|Chania]], [[Charleston International Airport|Charleston]], [[Corfu International Airport|Corfu]], [[Faro Airport|Faro]], [[Figari-Sud Corse Airport|Figari]], [[Grenoble Airport|Grenoble]], [[Ibiza Airport|Ibiza]], [[Kalamata International Airport|Kalamata]], [[Kefalonia Airport|Kefalonia]], [[Ljubljana Jo\u017ee Pu\u010dnik Airport|Ljubljana]] (begins 15 July 2019),<ref name=\"auto\">{{cite web|url=http://mediacentre.britishairways.com/pressrelease/details/86/2018-247/10366|title=LOOK AHEAD TO SUMMER AS SCHEDULE SHAPES UP|first=British|last=Airways|website= mediacentre.britishairways.com |accessdate=23 January 2019}}</ref> [[Marrakesh Airport|Marrakesh]], [[Montpellier M\u00e9diterran\u00e9e Airport|Montpellier]] (resumes 11 July 2019),<ref name=\"auto\"/> [[Muscat International Airport|Muscat]], [[Mykonos Island National Airport|Mykonos]], [[Nantes Atlantique Airport|Nantes]], [[Olbia Costa Smeralda Airport|Olbia]], [[Falcone\u2013Borsellino Airport |Palermo]], [[Palma de Mallorca Airport|Palma de Mallorca]], [[Aktion National Airport|Preveza/Lefkada]] (begins 26 May 2019),<ref name=\"britishairways1\"/> [[Pula Airport|Pula]], [[Salzburg Airport|Salzburg]], [[Santorini (Thira) National Airport|Santorini]], [[Split Airport|Split]], [[Zakynthos International Airport|Zakynthos]]\n<!-- -->\n| [[Brussels Airlines]] | [[Brussels Airport|Brussels]]\n<!-- -->\n| [[Bulgaria Air]] | [[Sofia Airport|Sofia]]\n<!-- -->\n| [[Cathay Pacific]] | [[Hong Kong International Airport|Hong Kong]]\n<!-- -->\n| [[China Eastern Airlines]] | [[Shanghai Pudong International Airport|Shanghai\u2013Pudong]]\n<!-- -->\n| [[China Southern Airlines]]<ref>{{cite web |title=China Southern Airlines timetable |url=http://www.csair.com/en/online/schedule/index.shtml |accessdate=13 October 2018}}</ref> | [[Guangzhou Baiyun International Airport|Guangzhou]], [[Sanya Phoenix International Airport|Sanya]], [[Wuhan Tianhe International Airport|Wuhan]], [[Zhengzhou Xinzheng International Airport|Zhengzhou]] (begins 25 June 2019)<ref>{{cite web |url= https://www.routesonline.com/news/38/airlineroute/283605/china-southern-adds-zhengzhou-london-heathrow-route-from-late-june-2019/ |title=China Southern adds Zhengzhou \u2013 London Heathrow route from late-June 2019|website= airlineroute.net |accessdate=27 March 2019}}</ref>\n<!-- -->\n| [[Croatia Airlines]] | [[Zagreb Airport|Zagreb]]<br>'''Seasonal:''' [[Split Airport|Split]]\n<!-- -->\n| [[Delta Air Lines]]<ref>{{cite web |title=Delta Flight Status |url=https://www.delta.com/content/www/en_US/ |accessdate=13 October 2018}}</ref> | [[Hartsfield\u2013Jackson Atlanta International Airport|Atlanta]], [[Logan International Airport|Boston]], [[Detroit Metropolitan Airport|Detroit]], [[Minneapolis\u2013Saint Paul International Airport|Minneapolis/St. Paul]], [[John F Kennedy International Airport|New York\u2013JFK]]<br>'''Seasonal:''' [[Portland International Airport|Portland (OR)]], [[Salt Lake City International Airport|Salt Lake City]]\n<!-- -->\n| [[EgyptAir]] | [[Cairo International Airport|Cairo]]<br>'''Seasonal:''' [[Luxor International Airport|Luxor]]\n<!-- -->\n| [[El Al]]<ref>{{cite web |title=Flight Schedule |url=https://www.elal.com/en/PassengersInfo/Useful-Info/Flight-Schedule/Pages/Flights-Schedule.aspx |accessdate=16 April 2019}}</ref> | [[Ben Gurion Airport|Tel Aviv\u2013Ben Gurion]]\n<!-- -->\n| [[Emirates (airline)|Emirates]] | [[Dubai International Airport|Dubai\u2013International]]\n<!-- -->\n| [[Ethiopian Airlines]] | [[Bole International Airport|Addis Ababa]]\n<!-- -->\n| [[Etihad Airways]] | [[Abu Dhabi International Airport|Abu Dhabi]]\n<!-- -->\n| [[Eurowings]] | [[Berlin Tegel Airport|Berlin-Tegel]], [[Cologne Bonn Airport|Cologne/Bonn]], [[D\u00fcsseldorf Airport|D\u00fcsseldorf]], [[Hamburg Airport|Hamburg]], [[Stuttgart Airport|Stuttgart]]\n<!-- -->\n| [[EVA Air]] | [[Suvarnabhumi Airport|Bangkok\u2013Suvarnabhumi]], [[Taiwan Taoyuan International Airport|Taipei\u2013Taoyuan]]\n<!-- -->\n| [[Finnair]] | [[Helsinki Airport|Helsinki]]\n<!-- -->\n| [[Flybe]] | [[Aberdeen Airport|Aberdeen]], [[Edinburgh Airport|Edinburgh]], [[Guernsey Airport|Guernsey]] (ends 26 October 2019),<ref>{{cite web |title=Daily flights to London Heathrow from Guernsey announced |url=https://guernseypress.com/news/2019/02/22/825k-subsidy-for-new-flybe-link-to-heathrow/ |website=ITV News |accessdate=3 April 2019}}</ref><ref>{{cite web |title=\u00a3825k subsidy for new Flybe link to Heathrow |url=https://guernseypress.com/news/2019/02/22/825k-subsidy-for-new-flybe-link-to-heathrow/ |website=Guernsey Press |accessdate=3 April 2019}}</ref> [[Isle of Man Airport|Isle of Man]] (begins 21 April 2019; ends 26 October 2019),<ref>https://www.routesonline.com/news/38/airlineroute/283776/flybe-adds-london-heathrow-isle-of-man-service-from-late-april-2019/</ref><ref>{{cite news |title=Flybe to launch first London Heathrow-Isle of Man service in almost 20 years |url=https://blueswandaily.com/flybe-to-launch-first-london-heathrow-isle-of-man-service-in-almost-20-years/ |accessdate=13 April 2019 |agency=Blue Swan Daily}}</ref> [[Cornwall Airport Newquay|Newquay]]\n<!-- -->\n| [[Garuda Indonesia]] | [[Ngurah Rai International Airport|Denpasar]], [[Soekarno-Hatta International Airport|Jakarta-Soekarno-Hatta]]\n<!-- -->\n| [[Gulf Air]] | [[Bahrain International Airport|Bahrain]]\n<!-- -->\n| [[Hainan Airlines]] | [[Changsha Huanghua International Airport|Changsha]]\n<!-- -->\n| [[Iberia (airline)|Iberia]] | [[Madrid\u2013Barajas Airport|Madrid]]\n<!-- -->\n| [[Icelandair]] | [[Keflav\u00edk International Airport|Reykjav\u00edk\u2013Keflav\u00edk]]\n<!-- -->\n| [[Iran Air]] | [[Tehran Imam Khomeini International Airport|Tehran\u2013Imam Khomeini]]\n<!-- -->\n| [[Japan Airlines]] | [[Haneda Airport|Tokyo\u2013Haneda]]\n<!-- -->\n<!-- JETBLUE - NEED TO HAVE A PRECISE START DATE BEFORE ADDING HERE. SAYING A ROUTE BEGINS SOMETIME IN 2021 IS NOT PRECISE -->\n<!-- -->\n| [[Kenya Airways]] | [[Jomo Kenyatta International Airport|Nairobi\u2013Kenyatta]]\n<!-- -->\n| [[KLM]]<ref>{{cite web |title=Timetable - KLM.com |url=https://www.klm.com/travel/ie_en/prepare_for_travel/up_to_date/timetable/timetable_result.htm |accessdate=13 October 2018}}</ref> | [[Amsterdam Airport Schiphol|Amsterdam]]\n<!-- -->\n| [[Korean Air]] | [[Incheon International Airport|Seoul\u2013Incheon]]\n<!-- -->\n| [[Kuwait Airways]] | [[Kuwait International Airport|Kuwait City]]\n<!-- -->\n| [[LATAM Brasil]] | [[S\u00e3o Paulo\u2013Guarulhos International Airport|S\u00e3o Paulo\u2013Guarulhos]]\n<!-- -->\n| [[LOT Polish Airlines]] | [[Warsaw Chopin Airport|Warsaw\u2013Chopin]]\n<!-- -->\n| [[Lufthansa]]<ref>{{cite web |title=Timetable - Lufthansa |url=https://www.lufthansa.com/uk/en/Online-timetable |accessdate=13 October 2018}}</ref> | [[Frankfurt Airport|Frankfurt]], [[Munich Airport|Munich]]\n<!-- -->\n| [[Malaysia Airlines]] | [[Kuala Lumpur International Airport|Kuala Lumpur\u2013International]]\n<!-- -->\n| [[Middle East Airlines]] | [[Beirut Rafic Hariri International Airport|Beirut]]\n<!-- -->\n| [[Oman Air]] | [[Muscat International Airport|Muscat]]\n<!-- -->\n| {{nowrap|[[Pakistan International Airlines]]}}| [[Islamabad International Airport|Islamabad]], [[Jinnah International Airport|Karachi]], [[Allama Iqbal International Airport|Lahore]]\n<!-- -->\n| [[Philippine Airlines]] | [[Ninoy Aquino International Airport|Manila]]\n<!-- -->\n| [[Qantas]]<ref>{{cite web |title= Timetables {{!}} Qantas |url= https://www.qantas.com/travel/airlines/timetable/global/en |accessdate=13 October 2018}}</ref> | [[Melbourne Airport|Melbourne]], [[Perth Airport|Perth]], [[Singapore Changi Airport|Singapore]], [[Sydney Airport|Sydney]]\n<!-- -->\n| [[Qatar Airways]] | [[Hamad International Airport|Doha]]\n<!-- -->\n| [[Royal Air Maroc]] | [[Mohammed V International Airport|Casablanca]], [[Rabat-Sale Airport|Rabat]]\n<!-- -->\n| [[Royal Brunei Airlines]] | [[Brunei International Airport|Bandar Seri Begawan]]\n<!-- -->\n| [[Royal Jordanian]] | [[Queen Alia International Airport|Amman\u2013Queen Alia]]\n<!-- -->\n| [[Saudia]] | [[King Abdulaziz International Airport|Jeddah]], [[King Khalid International Airport|Riyadh]]<br>'''Seasonal:''' [[Prince Mohammad Bin Abdulaziz Airport|Medina]]\n<!-- -->\n| [[Scandinavian Airlines]] | [[Copenhagen Airport|Copenhagen]], [[Oslo Airport, Gardermoen|Oslo\u2013Gardermoen]], [[Stavanger Airport, Sola|Stavanger]], [[Stockholm Arlanda Airport|Stockholm\u2013Arlanda]]\n<!-- -->\n| [[Shenzhen Airlines]] | [[Shenzhen Airport|Shenzhen]]\n<!-- -->\n| [[Singapore Airlines]] | [[Singapore Changi Airport|Singapore]]\n<!-- -->\n| [[South African Airways]] | [[O. R. Tambo International Airport|Johannesburg\u2013OR Tambo]]\n<!-- -->\n| [[SriLankan Airlines]] | [[Bandaranaike International Airport|Colombo]]\n<!-- -->\n| [[Swiss International Air Lines]] | [[Geneva International Airport|Geneva]], [[Z\u00fcrich Airport|Z\u00fcrich]]<br>'''Seasonal:''' [[Sion Airport|Sion]]\n<!-- -->\n| [[TAP Air Portugal]] | [[Lisbon Portela Airport|Lisbon]]\n<!-- -->\n| [[TAROM]] | [[Henri Coand\u0103 International Airport|Bucharest\u2013Otopeni]]\n<!-- -->\n| [[Thai Airways]] | [[Suvarnabhumi Airport|Bangkok\u2013Suvarnabhumi]]\n<!-- -->\n| [[Tianjin Airlines]] | [[Chongqing Jiangbei International Airport|Chongqing]], [[Tianjin Binhai International Airport|Tianjin]], [[Xi'an Xianyang International Airport|Xi'an]]\n<!-- -->\n| [[Tunisair]] | [[Tunis\u2013Carthage International Airport|Tunis]]\n<!-- -->\n| [[Turkish Airlines]]<ref>{{Cite web |url=https://onemileatatime.com/istanbul-airport-transition-delay/|title=Istanbul New Airport Transition Delayed Until April 5, 2019 (At The Earliest)}}</ref> | [[Istanbul Airport|Istanbul]]\n<!-- -->\n| [[Turkmenistan Airlines]]<ref>http://www.travelweekly.co.uk/articles/323395/turkmenistan-airlines-restores-uk-flights</ref> | [[Ashgabat International Airport|Ashgabat]]\n<!-- -->\n| [[United Airlines]]<ref>{{cite web |title= United Flight Schedules |url= https://www.united.com/web/en-US/apps/travel/timetable/default.aspx |accessdate=13 October 2018}}</ref> | [[O'Hare International Airport|Chicago\u2013O'Hare]], [[George Bush Intercontinental Airport|Houston\u2013Intercontinental]], [[Los Angeles International Airport|Los Angeles]], [[Newark Liberty International Airport|Newark]], [[San Francisco International Airport|San Francisco]], [[Washington Dulles International Airport|Washington\u2013Dulles]]<br>'''Seasonal:''' [[Denver International Airport|Denver]]\n<!-- -->\n| [[Uzbekistan Airways]] | [[Tashkent International Airport|Tashkent]]\n<!-- -->\n| [[Vietnam Airlines]] | [[Noi Bai International Airport|Hanoi]], [[Tan Son Nhat International Airport|Ho Chi Minh City]]\n<!-- -->\n| [[Virgin Atlantic]]<ref>{{cite web |title= Flight Schedules {{!}} Virgin Atlantic |url= https://www.virginatlantic.com/flightinfo/viewFlightSchedulesSetup.action |accessdate=13 October 2018}}</ref> | [[Hartsfield\u2013Jackson Atlanta International Airport|Atlanta]], [[Logan International Airport|Boston]], [[Indira Gandhi International Airport|Delhi]], [[Hong Kong International Airport|Hong Kong]], [[O. R. Tambo International Airport|Johannesburg\u2013OR Tambo]], [[Murtala Muhammed International Airport|Lagos]], [[McCarran International Airport|Las Vegas]], [[Los Angeles International Airport|Los Angeles]], [[Miami International Airport|Miami]], [[John F. Kennedy International Airport|New York\u2013JFK]], [[Newark Liberty International Airport|Newark]], [[San Francisco International Airport|San Francisco]], [[Seattle\u2013Tacoma International Airport|Seattle/Tacoma]], [[Shanghai Pudong International Airport|Shanghai\u2013Pudong]], [[Ben Gurion Airport|Tel Aviv\u2013Ben Gurion]] (begins {{date|2019-9-25}}),<ref>{{cite news |last1=Liu |first1=Jim |title=Virgin Atlantic adds Tel Aviv service from late-Sep 2019 |url=https://www.routesonline.com/news/38/airlineroute/283095/virgin-atlantic-adds-tel-aviv-service-from-late-sep-2019/ |accessdate=25 February 2019 |work=Routesonline |date=25 February 2019}}</ref> [[Washington Dulles International Airport|Washington\u2013Dulles]]<br>'''Seasonal:''' [[Grantley Adams International Airport|Barbados]]\n<!-- -->\n| [[Vueling]] | [[A Coru\u00f1a Airport|A Coru\u00f1a]]\n<!-- -->\n}}"
        result = wikitext_parser.get_airlines_destinations_from_wikitext(wikitext)
        self.assertEqual(result, expected_result)

    def test_unsupported_template(self):
        wikitext = '{{unsupported-template\n| [[Mighty Airlines]] | [[Nowhere]] }}'
        with self.assertRaises(ScrapError):
            wikitext_parser.get_airlines_destinations_from_wikitext(wikitext)

    def test_template_with_wrong_column_count(self):
        wikitext = '{{Airport-dest-list\n<!-- -->\n| [[Air Sea]] | [[Antarctica]] | [[Amundsen-Scott South Pole]] }}'
        with self.assertRaises(ScrapError):
            wikitext_parser.get_airlines_destinations_from_wikitext(wikitext)
